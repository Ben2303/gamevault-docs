"use strict";(self.webpackChunkcrackpipe_docs=self.webpackChunkcrackpipe_docs||[]).push([[9686],{9613:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>p});var i=a(9496);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a,i,n={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=i.createContext({}),d=function(e){var t=i.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=d(e.components);return i.createElement(s.Provider,{value:t},e.children)},m="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=d(a),h=n,p=m["".concat(s,".").concat(h)]||m[h]||g[h]||r;return a?i.createElement(p,o(o({ref:t},c),{},{components:a})):i.createElement(p,o({ref:t},c))}));function p(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,o=new Array(r);o[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[m]="string"==typeof e?e:n,o[1]=l;for(var d=2;d<r;d++)o[d]=a[d];return i.createElement.apply(null,o)}return i.createElement.apply(null,a)}h.displayName="MDXCreateElement"},7835:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>g,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var i=a(1163),n=(a(9496),a(9613));const r={sidebar_position:7},o="Game Indexing and Information Retrieval",l={unversionedId:"server-docs/indexing-and-metadata",id:"server-docs/indexing-and-metadata",title:"Game Indexing and Information Retrieval",description:"Game Indexing",source:"@site/docs/server-docs/indexing-and-metadata.md",sourceDirName:"server-docs",slug:"/server-docs/indexing-and-metadata",permalink:"/docs/server-docs/indexing-and-metadata",draft:!1,editUrl:"https://github.com/phalcode/crackpipe-docs/tree/master/docs/server-docs/indexing-and-metadata.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"docs",previous:{title:"User Management",permalink:"/docs/server-docs/user-management"},next:{title:"Images",permalink:"/docs/server-docs/images"}},s={},d=[{value:"Game Indexing",id:"game-indexing",level:2},{value:"Indexing Frequency",id:"indexing-frequency",level:3},{value:"Retrieving and Storing Game Information",id:"retrieving-and-storing-game-information",level:2},{value:"Integration with RAWG",id:"integration-with-rawg",level:3},{value:"Matching Games",id:"matching-games",level:4},{value:"RAWG API Key",id:"rawg-api-key",level:4},{value:"Probability Logs for Game Matching",id:"probability-logs-for-game-matching",level:4},{value:"Caching Game Information",id:"caching-game-information",level:3},{value:"Cached Metadata",id:"cached-metadata",level:4},{value:"Cache Expiry",id:"cache-expiry",level:4},{value:"Alternative Database Integration",id:"alternative-database-integration",level:4},{value:"Disabling RAWG Integration",id:"disabling-rawg-integration",level:3},{value:"Game Box Arts",id:"game-box-arts",level:2},{value:"Google Image Search",id:"google-image-search",level:3},{value:"Finding Box Arts",id:"finding-box-arts",level:4},{value:"Rate Limiting",id:"rate-limiting",level:4},{value:"Box Art Selection Algorithm",id:"box-art-selection-algorithm",level:3},{value:"Image Storage",id:"image-storage",level:3},{value:"Storing Box Arts",id:"storing-box-arts",level:4},{value:"Customizing Storage Path",id:"customizing-storage-path",level:4},{value:"Disabling Box Art Behavior",id:"disabling-box-art-behavior",level:3},{value:"Data Integrity Checks",id:"data-integrity-checks",level:2},{value:"Game File Checks",id:"game-file-checks",level:3}],c={toc:d},m="wrapper";function g(e){let{components:t,...a}=e;return(0,n.kt)(m,(0,i.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"game-indexing-and-information-retrieval"},"Game Indexing and Information Retrieval"),(0,n.kt)("h2",{id:"game-indexing"},"Game Indexing"),(0,n.kt)("h3",{id:"indexing-frequency"},"Indexing Frequency"),(0,n.kt)("p",null,"The server regularly scans the ",(0,n.kt)("inlineCode",{parentName:"p"},"/files")," directory for archived games to create an index. The frequency of indexing is determined by the ",(0,n.kt)("inlineCode",{parentName:"p"},"GAMES_INDEX_INTERVAL_IN_MINUTES")," environment variable, which has a default value of 5 minutes."),(0,n.kt)("h2",{id:"retrieving-and-storing-game-information"},"Retrieving and Storing Game Information"),(0,n.kt)("h3",{id:"integration-with-rawg"},"Integration with RAWG"),(0,n.kt)("h4",{id:"matching-games"},"Matching Games"),(0,n.kt)("p",null,"After adding games, the server attempts to find the corresponding game in the RAWG database. It looks for games on RAWG with similar titles and release years to establish a match. Once a match is found, it becomes the official mapping for that game, and any changes to the mapping must be done manually."),(0,n.kt)("h4",{id:"rawg-api-key"},"RAWG API Key"),(0,n.kt)("p",null,"To use the RAWG integration feature, users can set up a RAWG API Key by configuring the ",(0,n.kt)("inlineCode",{parentName:"p"},"RAWG_API_KEY")," environment variable. The API Key can be obtained from the ",(0,n.kt)("a",{parentName:"p",href:"https://rawg.io/login/?forward=developer"},"RAWG Developer Portal"),". The free tier of the API should be sufficient for most users."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"If you encounter limitations with your RAWG API Key, you have the option to upgrade your account on RAWG or ",(0,n.kt)("a",{parentName:"p",href:"mailto:contact@phalco.de"},"contact us")," for assistance.")),(0,n.kt)("h4",{id:"probability-logs-for-game-matching"},"Probability Logs for Game Matching"),(0,n.kt)("p",null,"When the ",(0,n.kt)("inlineCode",{parentName:"p"},"SERVER_LOG_LEVEL")," environment variable is set to ",(0,n.kt)("inlineCode",{parentName:"p"},"DEBUG"),", the server logs all probability information during the game matching process. These logs can be helpful in resolving any mapping issues with games."),(0,n.kt)("h3",{id:"caching-game-information"},"Caching Game Information"),(0,n.kt)("h4",{id:"cached-metadata"},"Cached Metadata"),(0,n.kt)("p",null,"The server automatically caches all metadata obtained from RAWG for each game. If a game is already cached, the cache is updated if necessary. The cached metadata includes detailed descriptions, screenshots, release dates, as well as information about developers, publishers, genres, tags, images, and stores."),(0,n.kt)("p",null,"Crackpipe relies heavily on RAWG integration to enhance the game data."),(0,n.kt)("h4",{id:"cache-expiry"},"Cache Expiry"),(0,n.kt)("p",null,"Cached metadata is stored in the database permanently and remains valid for a configurable period of time. The duration can be set using the ",(0,n.kt)("inlineCode",{parentName:"p"},"RAWG_API_CACHE_DAYS")," environment variable, with a default validity period of 7 days. The purpose of caching is to reduce the number of RAWG API calls. If you encounter rate limits with your RAWG API Key, you can extend the validity duration. Game metadata does not change frequently, so longer validity periods are generally acceptable."),(0,n.kt)("h4",{id:"alternative-database-integration"},"Alternative Database Integration"),(0,n.kt)("p",null,"In the event that RAWG discontinues its service, Crackpipe will retain the latest metadata and work on integrating another video game database as a replacement."),(0,n.kt)("h3",{id:"disabling-rawg-integration"},"Disabling RAWG Integration"),(0,n.kt)("p",null,"To disable all calls to the RAWG API, you can use the ",(0,n.kt)("inlineCode",{parentName:"p"},"TESTING_RAWG_API_DISABLED")," environment variable. This will result in no box arts being displayed."),(0,n.kt)("h2",{id:"game-box-arts"},"Game Box Arts"),(0,n.kt)("h3",{id:"google-image-search"},"Google Image Search"),(0,n.kt)("h4",{id:"finding-box-arts"},"Finding Box Arts"),(0,n.kt)("p",null,"Crackpipe uses a simple Google Image Search library to find suitable box arts for games. This is necessary because RAWG does not provide box arts directly."),(0,n.kt)("h4",{id:"rate-limiting"},"Rate Limiting"),(0,n.kt)("p",null,"When adding or updating a large number of games (more than 100), there might be rate limits imposed by Google on your IP address. In such cases, it is recommended to wait for a day or two before continuing the search."),(0,n.kt)("h3",{id:"box-art-selection-algorithm"},"Box Art Selection Algorithm"),(0,n.kt)("p",null,"The following algorithm is used to select box arts:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Searches for ",(0,n.kt)("inlineCode",{parentName:"li"},"GAME-TITLE (RELEASE-YEAR) game box art"),"."),(0,n.kt)("li",{parentName:"ol"},"Filter the results to PNG and JPG formats."),(0,n.kt)("li",{parentName:"ol"},"Filter the results to images where the height is less than the width."),(0,n.kt)("li",{parentName:"ol"},"Select the first available image.")),(0,n.kt)("h3",{id:"image-storage"},"Image Storage"),(0,n.kt)("h4",{id:"storing-box-arts"},"Storing Box Arts"),(0,n.kt)("p",null,"To ensure availability, performance, and efficient compression, Crackpipe stores the found box arts on the filesystem under the ",(0,n.kt)("inlineCode",{parentName:"p"},"/images")," directory."),(0,n.kt)("p",null,"For more information on Crackpipe's image management, refer to ",(0,n.kt)("a",{parentName:"p",href:"/docs/server-docs/images"},"this page"),"."),(0,n.kt)("h4",{id:"customizing-storage-path"},"Customizing Storage Path"),(0,n.kt)("p",null,"The storage path for images can be customized by modifying the ",(0,n.kt)("inlineCode",{parentName:"p"},"IMAGE_STORAGE_PATH")," environment variable."),(0,n.kt)("h3",{id:"disabling-box-art-behavior"},"Disabling Box Art Behavior"),(0,n.kt)("p",null,"To completely disable the box art feature, you can use the ",(0,n.kt)("inlineCode",{parentName:"p"},"TESTING_GOOGLE_API_DISABLED")," environment variable. This will result in no box arts being displayed."),(0,n.kt)("h2",{id:"data-integrity-checks"},"Data Integrity Checks"),(0,n.kt)("p",null,"The autoindexer also performs various integrity checks on game files to maintain data consistency."),(0,n.kt)("h3",{id:"game-file-checks"},"Game File Checks"),(0,n.kt)("p",null,"For each game file, the autoindexer verifies the following:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Game Existence: Checks if the game exists in the database based on the file path."),(0,n.kt)("li",{parentName:"ul"},"Size Verification: Compares the file size in the database with the actual file size and updates the game size if they differ."),(0,n.kt)("li",{parentName:"ul"},"Restoring Deleted Games: Restores, re-indexes, and updates games that were previously deleted but are found in the file system based on the file path or a combination of title and release year.")),(0,n.kt)("p",null,"These integrity checks ensure the accuracy and reliability of game data in the Crackpipe Backend Application."))}g.isMDXComponent=!0}}]);